# environments/ingolstadt/city.yaml
defaults:
  device: "cpu"
  embed_dim: 64
  algo_name: "PPO"
  algo_kwargs:
    n_steps: 2048
  net_arch:
    pi: [128]
    vf: [128]
  gat_hidden: 64
  gat_heads: 2
  reward_fn_name: "queue_penalty"
  # reward_fn_kwargs:
  #   beta: 1.0
  tl_config:
    enforce_min_green_s: 5.0
    amber_duration_s: 2.0
    all_red_after_amber: true
    all_red_duration_s: 1.0
  policy_verbose: 1
  auto_subscribe: True
  infer_actions_from_sumo: true
  ticks_per_decision: 5


intersections:
  - node_id: "N1"
    tls_id: "tlN1"
    detectors_in: ["e2_N1_i1", "e2_N1_i2", "e2_N1_i3", "e2_N1_i4", "e2_N1_i5", "e2_N1_i6", "e2_N1_i7", "e2_N1_i8"]
    # detectors_out: ["e2_N1_o1", "e2_N1_o2", "e2_N1_o3", "e2_N1_o4", "e2_N1_o5"]
    detectors_out: []
    neighbour_ids: ["N2", "N10"]
    edges: [["N1","N2"], ["N2","N1"], ["N2","N10"], ["N10","N2"]]

  - node_id: "N2"
    tls_id: "tlN2"
    detectors_in: ["e2_N2_i1", "e2_N2_i2", "e2_N2_i3", "e2_N2_i4", "e2_N2_i5", "e2_N2_i6", "e2_N2_i7"]
    # detectors_out: ["e2_N2_o1", "e2_N2_o2", "e2_N2_o3", "e2_N2_o4", "e2_N2_o5", "e2_N2_o6"]
    detectors_out: []
    neighbour_ids: ["N1", "N10"]
    edges: [["N2","N1"], ["N1","N2"], ["N2","N10"], ["N10","N2"]]

  - node_id: "N10"
    tls_id: "tlN10"
    detectors_in: ["e2_N10_i1", "e2_N10_i2", "e2_N10_i3", "e2_N10_i4", "e2_N10_i5", "e2_N10_i6", "e2_N10_i7", "e2_N10_i8"]
    # detectors_out: ["e2_N10_o1", "e2_N10_o2", "e2_N10_o3", "e2_N10_o4", "e2_N10_o5", "e2_N10_o6", "e2_N10_o7"]
    detectors_out: []
    detector_groups:
      "e2_N10_i7": ["e2_N10_i7a", "e2_N10_i7b"]
      "e2_N10_i8": ["e2_N10_i8a", "e2_N10_i8b"]
    neighbour_ids: ["N1", "N2", "N11"]
    edges: [["N10","N2"], ["N2","N10"], ["N2","N1"], ["N1","N2"]]
